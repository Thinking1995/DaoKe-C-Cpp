<html>
<head>
  <title>6、字符串输入&amp;输出</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601967 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5224"/>
<h1>6、字符串输入&amp;输出</h1>

<div>
<span><div><div><span style="font-size: 36pt; font-weight: bold;">字符串输入&amp;输出</span></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">字符串输入</span></div><div><br/></div><div>如果想把一个字符串读入程序，必须预留储存该字符串的空间，用输入函数获取该字符串。</div><div><br/></div><div><span style="background-color: rgb(255, 250, 165); font-weight: bold;-evernote-highlight:true;">不要指望计算机在读取字符串时顺便计算它的长度，然后再分配空间。</span></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 49px;"></col><col style="width: 73px;"></col><col style="width: 140px;"></col><col style="width: 364px;"></col></colgroup><tbody><tr><td style="vertical-align: middle; width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt; font-weight: bold;">序号</span></div></td><td style="vertical-align: middle; width: 73px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt; font-weight: bold;">返回值</span></div></td><td style="vertical-align: middle; width: 140px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt; font-weight: bold;">输入函数</span></div></td><td style="vertical-align: middle; width: 364px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt; font-weight: bold;">描述</span></div></td></tr><tr><td style="vertical-align: middle; width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">1</span></div></td><td style="vertical-align: middle; width: 73px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">int</span></div></td><td style="vertical-align: middle; width: 140px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">getc()</span></div><ul><li><div><span style="font-size: 9pt;">FILE *stream</span></div></li></ul></td><td style="vertical-align: middle; width: 364px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">【作用】从stream(流)获取并返回下一个字符，如果到达文件尾返回EOF。</span></div></td></tr><tr><td style="vertical-align: middle; width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">2</span></div></td><td style="vertical-align: middle; width: 73px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">int</span></div></td><td style="vertical-align: middle; width: 140px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">getchar()</span></div><ul><li><div><span style="font-size: 9pt;">void</span></div></li></ul></td><td style="vertical-align: middle; width: 364px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">【作用】从STDIN(标准输入)获取并返回下一个字符，如果到达文件尾返回EOF。</span></div></td></tr><tr><td style="vertical-align: middle; width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">3</span></div></td><td style="vertical-align: middle; width: 73px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">char *</span></div></td><td style="vertical-align: middle; width: 140px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">gets()</span></div><ul><li><div><span style="font-size: 9pt;">char *str</span></div></li></ul></td><td style="vertical-align: middle; width: 364px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">【作用】从STDIN(标准输入)读取字符并把它们加载到str(字符串)里,直到遇到新行(\n)或到达EOF。</span></div><div><span style="font-size: 9pt;">【返回】读入的字符串，如果错误返回NULL。</span></div><div><span style="font-size: 9pt;">【注意】不太安全，如果输入的字符串过长，会导致缓冲区溢出（buffer overflow）。多余的字符可能会擦写掉程序中的其他数据，会导致程序异常中止。</span></div></td></tr><tr><td style="vertical-align: middle; width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">4</span></div></td><td style="vertical-align: middle; width: 73px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">char *</span></div></td><td style="vertical-align: middle; width: 140px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">gets_s()</span></div><ul><li><div><span style="font-size: 9pt;">char *str</span></div></li><li><div><span style="font-size: 9pt;">size_t n</span></div></li></ul></td><td style="vertical-align: middle; width: 364px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">【作用】类似于gets()函数，但可以指定读入的字符数量。</span></div><div><span style="font-size: 9pt;">【注意】读到最大字符数都没有读到换行符，会执行以下几步。首先把目标数组中的首字符设置为空字符，读取并丢弃随后的输入直至读到换行符或文件结尾，然后返回空指针。</span></div><div><span style="font-size: 9pt;">会丢弃输入行中超出范围的字符。</span></div></td></tr><tr><td style="vertical-align: middle; width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">5</span></div></td><td style="vertical-align: middle; width: 73px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">int</span></div></td><td style="vertical-align: middle; width: 140px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">scanf()</span></div><ul><li><div><span style="font-size: 9pt;">const char *format, </span></div></li><li><div><span style="font-size: 9pt;">...</span></div></li></ul></td><td style="vertical-align: middle; width: 364px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">【作用】根据由format(格式)指定的格式从stdin(标准输入)读取，并保存数据到其它参数。</span></div><div><span style="font-size: 9pt;">【返回】成功赋值的变量数量，发生错误时返回EOF。</span></div><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal;">【参数】</span></span></div><ul style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px 0px 0px 40px; border: 1px solid transparent; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><li style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px; border: 1px solid transparent;"><div style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; margin: 0px; padding: 0px;"><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent;"><span style="font-size: 9pt; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal;">*format——格式控制字符串。</span></span></div></li></ul><div><span style="font-size: 9pt;">【注意】</span></div><ul><li><div><span style="font-size: 9pt;">如果读取基本变量类型的值，在变量名前加上一个&amp;。</span></div></li><li><div><span style="font-size: 9pt;">如果把字符串读入字符数组中，不要使用&amp;。</span></div></li><li><div><span style="font-size: 9pt;">如果输入行的内容过长，也会导致数据溢出。但可以在%s转换说明中使用字段宽度可防止溢出。</span></div></li><li><div><span style="font-size: 9pt;">如果将输入给赋给了未初始化的指针，该指针可能会指向任何地方。从而导致程序异常中止。</span></div></li><li><div><span style="font-size: 9pt;">如果读入多个值，转换说明之间要存在空格。C规定在第1个出错处停止读取输入。</span></div></li><li><div><span style="font-size: 9pt;">输入的字符串中不可包含空格字符。</span></div></li><li><div><span style="font-size: 9pt;">除了%c模式，在读取输入时会跳过非空白字符前面的所有空白字符，然后一直读取字符，直至遇到空白字符或与正在读取字符不匹配的字符。</span></div></li><li><div><span style="font-size: 9pt;">如果还没有输入任何内容时，该函数会阻塞整个运行程序。</span></div></li></ul></td></tr></tbody></table><div><br/></div></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">字符串输出</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 49px;"></col><col style="width: 68px;"></col><col style="width: 137px;"></col><col style="width: 361px;"></col></colgroup><tbody><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt; font-weight: bold;">序号</span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 68px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt; font-weight: bold;">返回值</span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 137px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt; font-weight: bold;">输出函数</span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 361px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt; font-weight: bold;">描述</span></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt;">1</span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 68px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt;">int</span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 137px; padding: 8px;"><div><span style="font-size: 9pt;">putc()</span></div><ul><li><div><span style="font-size: 9pt;">int ch, </span></div></li><li><div><span style="font-size: 9pt;">FILE *stream</span></div></li></ul></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 361px; padding: 8px;"><div><span style="font-size: 9pt;">【作用】把字符ch写到stream(流)中。</span></div><div><span style="font-size: 9pt;">【返回】写入的字符，发生错误时返回EOF。</span></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt;">2</span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 68px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt;">int</span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 137px; padding: 8px;"><div><span style="font-size: 9pt;">putchar()</span></div><ul><li><div><span style="font-size: 9pt;">int ch</span></div></li></ul></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 361px; padding: 8px;"><div><span style="font-size: 9pt;">【作用】把ch写到STDOUT(标准输出)</span></div><div><span style="font-size: 9pt;">【返回】写入的字符，发生错误时返回EOF。</span></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt;">3</span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 68px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt;">int</span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 137px; padding: 8px;"><div><span style="font-size: 9pt;">puts()</span></div><ul><li><div><span style="font-size: 9pt;">char *str</span></div></li></ul></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 361px; padding: 8px;"><div><span style="font-size: 9pt;">【作用】str(字符串)写到STDOUT(标准输出)上。</span></div><div><span style="font-size: 9pt;">【注意】一次只输出一个字符串，无法限制输出字符串的长度。遇到空字符就停止输出。</span></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt;">4</span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 68px; padding: 8px;"><div style="text-align: center;"><span style="font-size: 9pt;">int</span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 137px; padding: 8px;"><div><span style="font-size: 9pt;">printf()</span></div><ul><li><div><span style="font-size: 9pt;">const char *format</span></div></li><li><div><span style="font-size: 9pt;">...</span></div></li></ul></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 361px; padding: 8px;"><div><span style="font-size: 9pt;">【作用】根据format(格式)给出的格式打印输出到STDOUT(标准输出)和其它参数中。</span></div><div><span style="font-size: 9pt;">【返回】打印的字符数，如果发生错误则返回一个负值。</span></div><div><span style="font-size: 9pt;">【注意】</span></div><ul><li><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 9pt; font-weight: bold;-evernote-highlight:true;">格式字符串中的转换说明一定要与后面的每个项相匹配。</span></span></div></li><li><div><span style="font-size: 9pt;">程序把传入的值放入栈stack的内存区域。计算机根据变量类型（不是根据转换说明）把这些值放入栈中。但printf()函数是根据转换说明（不是根据变量类型）从栈中读取值，所以如果变量类型与转换说明不一致时，会出现读取出错误值。</span></div></li></ul></td></tr></tbody></table><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><b><font style="font-size: 14pt;">标准流</font></b></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 49px;"></col><col style="width: 99px;"></col><col style="width: 86px;"></col><col style="width: 124px;"></col></colgroup><tbody><tr><td style="border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">序号</font></span></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 99px; padding: 8px;"><div style="text-align: center;"><b><font style="font-size: 9pt;">标准流</font></b></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 86px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">文件流指针</font></span></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 124px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">通常使用的设备</font></span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">1</font></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 99px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">标准输入</font></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 86px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">STDIN</font></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 124px; padding: 8px;"><div><font style="font-size: 9pt;">键盘</font></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">2</font></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 99px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">标准输出</font></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 86px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">STDOUT</font></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 124px; padding: 8px;"><div><font style="font-size: 9pt;">显示器</font></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">3</font></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 99px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">标准错误</font></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 86px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">STDERR</font></div></td><td style="border: 1px solid rgb(204, 204, 204); width: 124px; padding: 8px;"><div><font style="font-size: 9pt;">显示器</font></div></td></tr></tbody></table><ul><li><div><span style="box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal; font-weight: bold;">标准错误输出</span><span style="font-size: medium; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(0, 0, 0); font-family: 微软雅黑; font-variant-caps: normal; font-variant-ligatures: normal;">提供了一个逻辑上不同的地方来接收并方便查看错误信息。</span></div></li></ul><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><b><font style="font-size: 14pt;">行结束符号</font></b></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 49px;"></col><col style="width: 96px;"></col><col style="width: 80px;"></col></colgroup><tbody><tr><td style="width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt; font-weight: bold;">序号</span></div></td><td style="width: 96px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt; font-weight: bold;">系统</span></div></td><td style="width: 80px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt; font-weight: bold;">行结束符号</span></div></td></tr><tr><td style="width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">1</span></div></td><td style="width: 96px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">Windows</span></div></td><td style="width: 80px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">\r\n</span></div></td></tr><tr><td style="width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">2</span></div></td><td style="width: 96px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">Linux\Unix</span></div></td><td style="width: 80px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">\n</span></div></td></tr><tr><td style="width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">3</span></div></td><td style="width: 96px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">Mac</span></div></td><td style="width: 80px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">\r</span></div></td></tr></tbody></table><div><br/></div><div><br/></div></div><div><br/></div></span>
</div></body></html> 