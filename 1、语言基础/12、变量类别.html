<html>
<head>
  <title>12、变量类别</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601967 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="5150"/>
<h1>12、变量类别</h1>

<div>
<span><div><h1><span style="font-size: 36pt;">变量类别</span></h1><div><div><br/></div><div><br/></div><div><br/></div><div><font style="font-size: 14pt;"><b>变量类别</b></font></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 49px;"></col><col style="width: 129px;"></col><col style="width: 54px;"></col><col style="width: 48px;"></col><col style="width: 67px;"></col><col style="width: 81px;"></col><col style="width: 93px;"></col><col style="width: 375px;"></col></colgroup><tbody><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">序号</font></span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 129px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">存储类别</font></span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 54px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">存储期</font></span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 48px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">链接</font></span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 67px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">作用域</font></span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 81px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">声明区域</font></span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 93px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">未初始化时</font></span></div><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">存储的值</font></span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 375px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">描述</font></span></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">1</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 129px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">[auto] 自动变量</font></div><div style="text-align: center;"><font style="font-size: 9pt;">【局部变量】</font></div></td><td rowspan="2" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); height: 56px; width: 54px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">动态</font></div></td><td rowspan="3" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); height: 92px; width: 48px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">无</font></div></td><td colspan="2" rowspan="3" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); height: 92px; width: 148px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">块/函数</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 93px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">垃圾值</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 375px; padding: 8px;"><div><span style="font-weight: bold;"><font style="font-size: 9pt;">默认使用，显式使用时是为了区分同名的全局变量。</font></span></div><div><font style="font-size: 9pt;">auto关键字在C++中的用法完全不同，如果编写C/C++兼容的程序，最好不要使用auto作为存储类别说明符。</font></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">2</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 129px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">register 寄存器变量</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 93px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">——</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 375px; padding: 8px;"><div><font style="font-size: 9pt;">储存在CPU的寄存器中【访问速度块，但无法获取其地址】</font></div><div><font style="font-size: 9pt;">可声明为register的数据类型有限，不能声明double类型。</font></div><div><font style="font-size: 9pt;">一般在嵌入式编程中使用。</font><br/></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">3</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 129px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">static 局部变量</font></div></td><td rowspan="3" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); height: 92px; width: 54px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">静态</font></div></td><td rowspan="3" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); height: 92px; width: 93px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">默认值</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 375px; padding: 8px;"><div><font style="font-size: 9pt;">程序离开它们所在的函数后，这些变量仍会保留，计算机在多次函数调用之间会记录它们的值。</font></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">4</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 129px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">static 全局变量</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 48px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">内部</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 67px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">当前文件</font></div></td><td rowspan="2" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); height: 56px; width: 81px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">所有函数外</font></div></td><td rowspan="2" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); height: 56px; width: 375px; padding: 8px;"><div><font style="font-size: 9pt;">——</font><br/></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">5</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 129px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">全局变量</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 48px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">外部</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 67px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">翻译单元</font></div></td></tr></tbody></table><ul><li><div><span style="background-color: rgb(255, 250, 165); font-weight: bold;-evernote-highlight:true;">翻译单元——编译器源代码文件和它所包含的所有的头文件都看成一个包含信息的单独文件。</span></div></li></ul><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">链接属性</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 49px;"></col><col style="width: 88px;"></col><col style="width: 198px;"></col></colgroup><tbody><tr><td style="vertical-align: middle; width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-weight: bold; font-size: 9pt;">序号</span></div></td><td style="vertical-align: middle; width: 88px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-weight: bold; font-size: 9pt;">链接属性</span></div></td><td style="vertical-align: middle; width: 198px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-weight: bold; font-size: 9pt;">描述</span></div></td></tr><tr><td style="vertical-align: middle; width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">1</span></div></td><td style="vertical-align: middle; width: 88px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">无链接</span></div><div style="text-align: center;"><span style="font-size: 9pt;">none</span></div></td><td style="vertical-align: middle; width: 198px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">仅在本代码块中使用。</span></div></td></tr><tr><td style="vertical-align: middle; width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">2</span></div></td><td style="vertical-align: middle; width: 88px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">内部链接</span></div><div style="text-align: center;"><span style="font-size: 9pt;">internal</span></div></td><td style="vertical-align: middle; width: 198px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">仅在本文件中使用。</span></div></td></tr><tr><td style="vertical-align: middle; width: 49px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">3</span></div></td><td style="vertical-align: middle; width: 88px; padding: 8px; border: 1px solid;"><div style="text-align: center;"><span style="font-size: 9pt;">外部链接</span></div><div style="text-align: center;"><span style="font-size: 9pt;">external</span></div></td><td style="vertical-align: middle; width: 198px; padding: 8px; border: 1px solid;"><div><span style="font-size: 9pt;">可在翻译单元的所有文件中使用。</span></div></td></tr></tbody></table><ul><li><div><span style="font-size: 9pt;">使用static关键字可以将全局变量从外部连接修改为内部连接，但链接属性只能修改一次【一旦将标识符的链接属性变为内部链接，就无法变回外部链接】</span><br/></div></li></ul><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 14pt; font-weight: bold;">存储期</span></div><ul><li><div>指对象在内存中保留了多长时间。</div></li><li><div>对于并发编程，对象可以在特定线程的执行期存在。可以通过函数调用的方式显式分配和释放内存。</div></li></ul><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 49px;"></col><col style="width: 104px;"></col><col style="width: 451px;"></col></colgroup><tbody><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">序号</font></span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 104px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">存储期</font></span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 451px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">描述</font></span></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">1</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 104px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">动态存储期</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 451px; padding: 8px;"><div><span style="font-weight: bold; font-size: 9pt;">程序运行期间根据需要动态分配存储空间。</span></div><div><font style="font-size: 9pt;">程序在进入该变量所在的块/函数时被分配存储空间，程序退出该块/函数时该变量占用的内存会被释放。</font></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">2</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 104px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">静态存储期</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 451px; padding: 8px;"><div><span style="font-size: 9pt;">程序运行期间由系统分配固定存储空间，一直存在直至运行完毕。</span></div><div><font style="font-size: 9pt;"><b>文件作用域具有静态存储期。</b></font></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">3</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 104px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">线程存储期</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 451px; padding: 8px;"><div style="text-align: left;"><font style="font-size: 9pt;">用于并发程序设计，程序执行可被分为多个线程。</font></div><div style="text-align: left;"><font style="font-size: 9pt;">具有线程存储期的对象，从被声明时到线程结束一直存在。</font></div><div style="text-align: left;"><font style="font-size: 9pt;">以<span style="font-weight: bold;">关键字_Thread_local</span> 声明一个对象时，每个线程都获得该变量的私有备份。</font></div></td></tr></tbody></table><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-weight: bold;"><font style="font-size: 14pt;">作用域</font></span></div><ul><li><div>描述程序中可访问标识符的区域。</div></li></ul><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 49px;"></col><col style="width: 78px;"></col><col style="width: 470px;"></col></colgroup><tbody><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">序号</font></span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 78px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">作用域</font></span></div><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">scope</font></span></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 470px; padding: 8px;"><div style="text-align: center;"><span style="font-weight: bold;"><font style="font-size: 9pt;">描述</font></span></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">1</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 78px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">块</font></div><div style="text-align: center;"><font style="font-size: 9pt;">block</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 470px; padding: 8px;"><div><font style="font-size: 9pt;">【作用范围】从定义处到包含该定义的块的末尾</font></div><div><font style="font-size: 9pt;">【注释】块是用一对花括号括起来的代码区域。</font></div><div><font style="font-size: 9pt;">【具体块】循环语句块，分支语句块。</font></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">2</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 78px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">函数</font></div><div style="text-align: center;"><font style="font-size: 9pt;">function</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 470px; padding: 8px;"><div><font style="font-size: 9pt;">【作用范围】整个函数体。</font></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">3</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 78px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">当前文件</font></div><div style="text-align: center;"><font style="font-size: 9pt;">file</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 470px; padding: 8px;"><div><font style="font-size: 9pt;">【作用范围】从定义处到文件末尾.</font></div></td></tr><tr><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 49px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">4</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 78px; padding: 8px;"><div style="text-align: center;"><font style="font-size: 9pt;">翻译单元</font></div></td><td style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 470px; padding: 8px;"><div><font style="font-size: 9pt;">【作用范围】从定义处到文件末尾及整个翻译单元。</font></div></td></tr></tbody></table><ul><li><div>全局变量不能同名。</div></li><li><div>局部变量不能同名。</div></li></ul><div><br/></div><div><br/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><b><br/></b></span></div><div><span style="font-size: 12pt;"><br/></span></div></div></div><div><br/></div></span>
</div></body></html> 